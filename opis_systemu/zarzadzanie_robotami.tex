% Krzysztof Kwieciñski
\subsection{Zarz±dzanie robotami}
Okienko \texttt{Zarz±dzanie robotami} umo¿liwia ustawianie pozycji oraz orientacji wybranego robota na scenie.

Zak³adki umo¿liwiaj± wybór Pioneera, którego pozycjê chcemy zmieniæ. Aktywne s± tylko zak³adki skojarzone z~robotami dodanymi aktualnie do ¶wiata. 
Po wyborze zak³adki mo¿liwe jest podanie nowych wspó³rzêdnych $XY$ oraz orientacji $\theta$ robota. W~polach odpowiedzialnych za pozycjê i~orientacjê, kolor informuje o~poprawno¶ci wprowadzonych danych -- zielony oznacza poprawnie wype³nione pola, natomiast czerwony b³êdnie. 
Przyci¶niêcie przycisku \texttt{Ustaw} powoduje ustawienie Pioneera zgodnie z~¿±daniem. Przycisk \texttt{Reset} przenosi robota do punktu $(0, 0)$ i~ustawia jego orientacjê na~$0$. 

Po zmianie zak³adki lub ustawieniu/zresetowaniu pozycji, w~polach wy¶wietlane s± aktualne wspó³rzêdne robota.

\begin{figure}[htbp]
 \centering
 \includegraphics[]{opis_systemu/materialy/zarzadzanie_robotami.jpeg}
 \label{fig:zarzadzanie_robotami}
 \caption{Okno zarz±dzania robotami}
\end{figure}

\subsubsection{Implementacja}
Klasa odpowiadaj±ca za ca³e okienko to \texttt{RobotManagementWindow}. Dziedziczy ona po klasie \texttt{QDialog}. 

Sloty odpowiadaj±ce za to, co dzieje siê w~oknie w~momencie dodania lub schowania robota, to:
\begin{lstlisting}[language=C++, numbers=none]
public slots:
	void onAddRobot(int id);
	void onHideRobot(int id);
\end{lstlisting}
W~momencie otrzymania odpowiednich sygna³ów aktywowana b±d¼ dezaktywowana jest stosowna zak³adka, a~tak¿e ustawiane s± warto¶ci w~polach.

Wy¶wietlanie pozycji i~orientacji robota jest mo¿liwe dziêki subskrybowaniu odpowiedniego tematu i~wywo³aniu funkcji aktualizuj±cej pozycjê robota:
\begin{lstlisting}[language=C++, numbers=none]
this->sub = node->Subscribe("~/pose/info", 
                            &RobotManagementWindow::OnPoseMsg, this);
\end{lstlisting}

Klasa odpowiadaj±ca za wygl±d pojedynczej zak³adki oraz g³ówn± funkcjonalno¶æ okienka to \texttt{RobotManagementTab}. Dziedziczy ona po klasie \texttt{QWidget}. Jej kluczowe metody to:
\begin{lstlisting}[language=C++, numbers=none]
private slots:
	void on_pushButtonUstaw_clicked();
	void on_pushButtonReset_clicked();
\end{lstlisting}
Odpowiadaj± one za ustawienie b±d¼ zresetowanie pozycji robota. Przyci¶niêcie którego¶ z~przycisków skutkuje wywo³aniem us³ugi \texttt{/gazebo/set\_model\_state}.













